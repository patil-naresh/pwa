"use strict";(self.webpackChunkpwa_react_typescript=self.webpackChunkpwa_react_typescript||[]).push([[105],{105:(e,s,t)=>{t.r(s),t.d(s,{default:()=>r});var n=t(43),l=t(579);const o=e=>{let{tasks:s,setTasks:t}=e;return s.length>0?(0,l.jsx)("ul",{className:"todo-list",children:s.map(((e,s)=>(0,l.jsx)(a,{taskId:s,task:e,setTasks:t},s)))}):(0,l.jsxs)("div",{className:"empty",children:[(0,l.jsx)("p",{children:(0,l.jsx)("svg",{viewBox:"0 0 21 21",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsxs)("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(2.5 4.5)",children:[(0,l.jsx)("path",{d:"m3.65939616 0h8.68120764c.4000282 0 .7615663.23839685.9191451.6060807l2.7402511 6.3939193v4c0 1.1045695-.8954305 2-2 2h-12c-1.1045695 0-2-.8954305-2-2v-4l2.74025113-6.3939193c.15757879-.36768385.51911692-.6060807.91914503-.6060807z"}),(0,l.jsx)("path",{d:"m0 7h4c.55228475 0 1 .44771525 1 1v1c0 .55228475.44771525 1 1 1h4c.5522847 0 1-.44771525 1-1v-1c0-.55228475.4477153-1 1-1h4"})]})})}),(0,l.jsx)("p",{children:(0,l.jsx)("b",{children:"Empty list"})}),(0,l.jsx)("p",{children:"Add a new task above"})]})},a=e=>{let{taskId:s,task:t,setTasks:n}=e;const o="task-item",a=t.done?" done":"";return(0,l.jsxs)("li",{className:o+a,children:[(0,l.jsxs)("div",{className:o+"-infos",children:[(0,l.jsxs)("label",{className:o+"-checkbox",children:[(0,l.jsx)("input",{type:"checkbox",onChange:()=>{const e=!t.done;n((n=>n.map(((n,l)=>l===s?{text:t.text,done:e}:n))))},checked:t.done}),(0,l.jsx)("div",{className:o+"-checkbox-el"})]}),(0,l.jsx)("div",{className:o+"-text",children:t.text})]}),(0,l.jsx)("div",{className:o+"-remove",children:(0,l.jsx)("button",{onClick:()=>{n((e=>e.filter(((e,t)=>t!==s))))},title:"Remover item",children:(0,l.jsx)("svg",{height:"21",viewBox:"0 0 21 21",width:"21",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsxs)("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",transform:"translate(5 5)",children:[(0,l.jsx)("path",{d:"m10.5 10.5-10-10z"}),(0,l.jsx)("path",{d:"m10.5.5-10 10"})]})})})})]})},r=()=>{const[e]=(0,n.useState)("toDoListApp"),[s]=(0,n.useState)("toDoList"),[t,a]=(0,n.useState)(null),[r,d]=n.useState([]),[c,i]=n.useState(0),h=n.useRef(),u=()=>{var e;const s=null===h||void 0===h||null===(e=h.current)||void 0===e?void 0:e.value;if(s&&!r.some((e=>e.text===s))){var t;const e={text:s,done:!1};d((s=>[...s,e])),h.current.value="",null===h||void 0===h||null===(t=h.current)||void 0===t||t.focus()}};return n.useEffect((()=>{if(i(r.filter((e=>!1===e.done)).length),t){const e=t.transaction([s],"readwrite").objectStore(s),n=e.clear();n.onerror=e=>{console.error("Failed to add data")},n.onsuccess=s=>{e.add({tasks:r}).addRequest=e=>{console.log("Data added successfully")}}}}),[r]),(0,n.useEffect)((()=>{const t=window.indexedDB.open(e);t.onerror=e=>{console.log("Failed to open database")},t.onsuccess=e=>{var t;const n=null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.result;a(n);n.transaction([s],"readwrite").objectStore(s).getAll().onsuccess=e=>{d(e.target.result[0].tasks)}},t.onupgradeneeded=e=>{e.target.result.createObjectStore(s,{keyPath:"id",autoIncrement:!0})}}),[]),(0,l.jsx)("div",{className:"main",children:(0,l.jsxs)("div",{className:"todo",children:[(0,l.jsxs)("div",{className:"todo-header",children:[(0,l.jsx)("h1",{children:"Todo List"}),(0,l.jsx)("small",{children:r.length>0&&0===c?"All done! =D":(0,l.jsxs)(l.Fragment,{children:["You have ",(0,l.jsx)("b",{children:c})," of ",(0,l.jsx)("b",{children:r.length})," tasks remaining"]})})]}),(0,l.jsxs)("div",{className:"todo-form",children:[(0,l.jsx)("input",{ref:h,type:"text",placeholder:"Add task...",onKeyUp:e=>{let{keyCode:s,target:t}=e;13===s?u():r.some((e=>e.text===t.value))?h.current.classList.add("invalid"):h.current.classList.remove("invalid")}}),(0,l.jsx)("button",{onClick:u,children:"+"})]}),(0,l.jsx)("div",{className:"todo-body",children:(0,l.jsx)(o,{tasks:r,setTasks:d})})]})})}}}]);
//# sourceMappingURL=105.f36d65bf.chunk.js.map